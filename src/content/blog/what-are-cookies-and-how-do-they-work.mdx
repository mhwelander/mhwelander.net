---
title: 'What are cookies, and how do they work?'
description: 'Lorem ipsum dolor sit amet'
pubDate: 'August 30 2024'
tags: [Cookies, Data Privacy]
---

I'm pretty sure I know what **cookies** are, and how they work. But I'm _also_ pretty sure I know what a **cat** looks like, and yet, drawing one without reference results in.. something less than ideal:

<figure class="centerFig">

<img src="https://preview.redd.it/im-bored-and-wanna-draw-some-bad-cats-v0-0ftw4kjoot3c1.jpeg?width=832&format=pjpg&auto=webp&s=5349501f644bb26c0369270c97225a4d1bd0c796" width="250" />

<figCaption>... meow, I guess?</figCaption>
</figure>

So I did some research. This post is for anyone with passing knowledge of cookies who really wants to get into the crumbs.

## What is a cookie, and what is the point?

A cookie is a **piece of text** that a website sends to your browser that **uniquely identifies you** to that website. Your browser stores the cookie, and includes it in every subsequent requests to that website:

<figure class="centerFig">
![](./images/2024/cookies-1.png)
<figCaption>A website recognizing an old friend</figCaption>
</figure>

Without a cookie, a website has no way of identify you. You are a shiny new stranger each time you request a page:

<figure class="centerFig">
![](./images/2024/cookies-2.png)
<figCaption>This website is a total Dori</figCaption>
</figure>

## _Why_ does a website need to remember me? I just want to look at pictures of old trains...

Often, it doesn't! And not all websites use cookies - that is something the creator of that website decides to do. For example, I chose to add the Google Analytics script tag to this blog, which means that you will receive two cookies (if you consent):

* `_ga`
* `_ga_*` 

The site does not _need_ cookies to work, and you can opt out of cookies at any time by clicking **Manage cookie preferences** in the footer.

### There are some essential cookies...

You must have a cookie in order to:

* To keep you logged in (session cookie)
* To save your preferences (for example, dark mode or light mode)

### ...and many non-essential cookies

other fluff:

* For analytics - to track your journey
* For personalization

If you were given a **session cookie**, the website can identify you until you close your browser. If you were given a **persistent cookie**, the website remembers you across multiple sessions.

## Is the cookie there forever?

No. A cookie lasts until you delete it, or until it expires. The website that issues the cookie sets the expiry date, but:

* Most browsers limit the max age ([Chrome's upper limit is 400 days](https://developer.chrome.com/blog/cookie-max-age-expires))
* Expiry dates must follow any regulation/s in the visitor's country

## How does it _really, technically_ work?

When you request a web page - let's say, `mhwelander.net` - that web page sends you a **response**. That response contains all the pieces of text required to display the page: HTML, CSS, scripts, images, fonts - and **cookies**, although you (and many legislative bodies) could argue that cookies are an _optional_ part of a healthy diet.

[image]

You can see this happening in [Chrome Developer Tools](https://developer.chrome.com/docs/devtools). Click `Option + âŒ˜ + I` (Mac) or `F12` (Windows), then click on the **Network** tab and refresh your page. Notice that the response from `mhwelander.net` includes various requests to get fonts, stylesheets, and script files:

<figure class="centerFig">

![](./images/2024/network-request.png)

<figCaption>The network app</figCaption>
</figure>

## But where be the cookies?

Although cookies are not on that list on an obvious way (websites are not sending `23dDie8abc303.cookie` files), _one or more of the requests in that list_ is **delivering cookies to your browser**:

[Highlight things that could be setting cookies]

 You can see the cookies your browser has stored for a particular site in **Application** tab of the Chrome Developer Tools, under **Storage > Cookies > [yourwebsite]**:

<figure class="centerFig">

![](./images/2024/application-cookies.png)

<figCaption>Cookies sent by mhwelander.net</figCaption>
</figure>

For example, the contents of my `_ga` cookie is `GA1.1.748647506.1724449994` - tasty stuff. Your browser then **stores** those cookies until:

* They expire
* You delete them
* A script on the website (such as a cookie consent banner) deletes them - or at least the ones [that a script is capable of deleting](#)

## Exactly how are cookies being delivered?

If websites are not sending you `*.cookie` files, then how do they make? You can receive a cookie from a website in two ways:

* In the HTTP response header (so fancy)
* Set by some Javascript

### Set by Javascript

### Set by the HTTP response header

## Domain matters: First party and third party cookies

http response header - set third party cookie

### Why does the Google Analytics script say mhwelander.net and not google.com?

Ah, well.. 'first party cookie' means 'cookie where the domain is mhwelander.net'. 

Isn't that the same thing?

Yeah. Kind of. :) 

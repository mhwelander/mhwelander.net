---
title: 'What are cookies, and how do they work?'
description: 'An introduction to how cookies work, where they come from, and what 1st/3rd party and HTTP-Only mean.'
pubDate: 'August 30 2024'
tags: [Cookies, Data Privacy]
showToc: true
---

import Block from '../../components/Block.astro'

I'm pretty sure I know what **cookies** are, and how they work. But I'm _also_ pretty sure I know what a **cat** looks like, and yet, drawing one without reference results in.. something less than ideal:

<figure class="centerFig" style="width:400px">



<figCaption>... meow, I guess?</figCaption>
</figure>

So I did some research. This post is for anyone with passing knowledge of cookies who really wants to get into the crumbs.

<Block class="note">
This blog post is about how cookies work - specifically _cookies_, and specifically how they _work_. It is not legal advice, nor does it cover other means of tracking and/or identifying users online.
</Block>

<!-- toc -->

## What is a cookie?

A cookie is a **piece of text** sent by a website to your browser that **uniquely identifies you** to that website. They have a name (`_X`) and a weird-looking value (`902A4Y`):

<figure class="centerFig w200">
![](./images/2024/cookies-drawing-1.png)
<figCaption>"Hi, I'm your cookie"</figCaption>
</figure>

 Your browser **stores that cookie**, and includes it in every subsequent requests to website [for as long as that cookie lasts](#how-long-does-a-cookie-last). This means that the website has a mechanism by which to identify you between page requests and (depending on the type of cookie) between browsing sessions:

<figure class="centerFig">
![](./images/2024/cookies-1.png)
<figCaption>A website recognizing an old friend</figCaption>
</figure>

Without a cookie (or some other identifier), a website cannot identify you between page requests or sessions. You are a shiny and exciting stranger each time you request a page - like the internet of old.

### What is a cookie used for?

Cookies by themselves don't really do anything - they are bits of text. Just like your passport doesn't really 'do' anything on its own. The point of a cookie is to identify that events belong to a particular person.

* I visited trains page
* I visited another trains page
* I scrolled all the way to the bottom of a page
* I came back to the website every day for a week

Shove all that into an analytics database.

#### Example: Analytics

* Collect sessions from 100 people 
* Notice that people drop off at the checkout page
* Notice that pages that are image heavy get the most views

#### Example: Personalization

* You are very interested in trains from 1900 - 1920 -- suggest related content to you

### How long does a cookie last?

In my house? Less than three minutes.

In a browser, however, a **persistent cookie** lasts until you delete it, or until it expires. The website that issues the cookie sets the expiry date, but:

* Most browsers limit the max age ([Chrome's upper limit is 400 days](https://developer.chrome.com/blog/cookie-max-age-expires))
* Expiry dates must follow any regulation/s in the visitor's country

By contrast, **session cookies** (a cookie issued without an expiration date) last until you close the browser.

### Who decides which cookies a website should issue?

Technically speaking, the **website owner** decides which cookies a website issues to visitors - but it's not always obvious where the cookies are coming from. Cookies can created by:

* The **website code** itself (Javascript or server-side code)
* An **embedded script** (for example, Google Analytics)
* An **embedded iframe** (for example, a YouTube video)

I was very surprised by the number of cookies set by a YouTube embed! If you have a large website with user-generated content, it can be really difficult to know where all the cookies are coming from.

<Block class="warning">
This might present a problem if _you_ (and not the originator of the script) are legally obligated to document all cookies and provide a way for vistors to opt out of processing (for example, by declining tracking cookies).
</Block>

### Do websites really need cookies?

Some cookies are in fact **essential** for a website to function correctly. Many websites use session cookies to keep you logged between page requests.

**Non-essential cookies** include cookies used for:

* Analytics (website performance)
* Personalization

Very useful to a business, and often make your experience more tailored to you, but you do not have to accept them. The website will still work.


## How does it actually work?

When you request a web page - let's say, `mhwelander.net` - that web page sends you a **response**. That response contains all the pieces of text required to display the page: HTML, CSS, scripts, images, fonts - and **cookies**, although you (and many legislative bodies) could argue that cookies are an _optional_ part of a healthy diet.

[image]

You can see this happening in [Chrome Developer Tools](https://developer.chrome.com/docs/devtools). Click `Option + âŒ˜ + I` (Mac) or `F12` (Windows), then click on the **Network** tab and refresh your page. Notice that the response from `mhwelander.net` includes various requests to get fonts, stylesheets, and script files:

<figure class="centerFig">

![](./images/2024/network-request.png)

<figCaption>The network app</figCaption>
</figure>

### Seeing your cookies

Although cookies are not on that list on an obvious way (websites are not sending `23dDie8abc303.cookie` files), _one or more of the requests in that list_ is **delivering cookies to your browser**:

[Highlight things that could be setting cookies]

 You can see the cookies your browser has stored for a particular site in **Application** tab of the Chrome Developer Tools, under **Storage > Cookies > [yourwebsite]**:

<figure class="centerFig">

![](./images/2024/application-cookies.png)

<figCaption>Cookies sent by mhwelander.net</figCaption>
</figure>

For example, the contents of my `_ga` cookie is `GA1.1.748647506.1724449994` - tasty stuff. Your browser then **stores** those cookies until:

* They expire
* You delete them
* A script on the website (such as a cookie consent banner) deletes them - or at least the ones [that a script is capable of deleting](#)

### Cookies come from a script or from the HTTP response header

If websites are not sending you `*.cookie` files, then how do they make? You can receive a cookie from a website in two ways:

* In the HTTP response header (so fancy)
* Set by some Javascript

### Cookies are included in the request header

## First party and third party cookies

http response header - set third party cookie

### Why does the Google Analytics script say mhwelander.net and not google.com?

Ah, well.. 'first party cookie' means 'cookie where the domain is mhwelander.net'. 

Isn't that the same thing?

Yeah. Kind of. :) 

## HTTP-Only and regular cookies

## What is all the fuss about cookies?
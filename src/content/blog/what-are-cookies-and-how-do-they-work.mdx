---
title: 'What are cookies, and how do they work?'
description: 'An introduction to how cookies work, where they come from, and what 1st/3rd party and HTTP-Only mean.'
pubDate: 'August 30 2024'
tags: [Cookies, Data Privacy]
showToc: true
---

import Block from '../../components/Block.astro'

I'm pretty sure I know what **cookies** are, and how they work. But I'm _also_ pretty sure I know what a **cat** looks like, and yet, drawing one without reference results in.. something less than ideal:

<figure class="centerFig" style="width:400px">

[IMAGE NEEDED]

<figCaption>... meow, I guess?</figCaption>
</figure>

So I did some research. This post is for anyone with passing knowledge of cookies who really wants to get into the crumbs.

<Block class="note">
This blog post is about how cookies work - specifically _cookies_, and specifically how they _work_. It is not legal advice, nor does it cover other means of tracking and/or identifying users online.
</Block>

<!-- toc -->

## What is a cookie?

A cookie is a **piece of text** sent by a website to your browser that **uniquely identifies you** to that website. They have a name (`_X`) and a weird-looking value (`902A4Y`):

<figure class="centerFig w300">
![](./images/2024/cookies-drawing-1.png)
<figCaption>"Hi, I'm your cookie"</figCaption>
</figure>

Your browser **stores the cookie** when it receives it, and includes it in subsequent requests to that website [for as long as that cookie lasts](#how-long-does-a-cookie-last):

<figure class="centerFig w600">
![](./images/2024/cookie-drawing-3.png)
<figCaption>A website recognizing an old friend</figCaption>
</figure>

This means that the website has a **mechanism by which to identify you** between page requests and (depending on the type of cookie) between browsing sessions:

<figure class="centerFig w400">
![](./images/2024/cookie-drawing-4.png)
<figCaption>A website recognizing an old friend</figCaption>
</figure>

Without a cookie (or some other online identifier), a website cannot identify you between requests. You are a shiny and exciting stranger each time you request a page - like the internet of <s>my youth</s> old.

### What is a cookie used for?

Cookies by themselves **don't really do anything**; the website and the browser pass them back and forth in a not-so-thrilling game of virtual table tennis. However, once a website can identify a visitor, it can [use a tracker like Google Analytics](https://www.zipy.ai/blog/website-tracking-tools) to string disparate activities together into a cohesive journey.

A tracker can show the path you took through the website, how long you spent on each page, and maybe even which components you interacted with and how far you scrolled. Companies can use this data to **personalize your experience** and **monitor trends** - if you spent three sessions looking at üêùbeekeeping paraphenalia, the website might start to suggest that you buy the discounted Beginner Beekeper Bundle.

<figure class="centerFig w500">
![](./images/2024/cookies-drawing-6.png)
<figCaption>A path through the content</figCaption>
</figure>

Without a cookie, these actions are disconnected. "Someone" from Denmark looked at manual honey extractors and "someone" from Denmark for spent 10 minutes reading a single page about carpets. Is it the same person? Who knows.

<Block class="note">
**Is it technically possible to track visitors by IP address?** An IP address does not necessarily identify an individual - it identifies a node on a network, which _could_ be a personal device - or it could be the router in an office.  Furthermore, most IP addresses are dynamic (they can change).
</Block>

### How long does a cookie last?

In my house? Less than three minutes.

In a browser, however, a **persistent cookie** lasts until you delete it, or until it expires. The website that issues the cookie sets the expiry date, _but_:

* Most browsers limit the max age ([Chrome's upper limit is 400 days](https://developer.chrome.com/blog/cookie-max-age-expires))
* Expiry dates must follow any regulation/s in the visitor's country

By contrast, **session cookies** (a cookie issued without an expiration date) last until you close the browser.

<figure class="centerFig w400">
![](./images/2024/cookies-drawing-5.png)
<figCaption>A well-aged cookie</figCaption>
</figure>

### Who decides which cookies a website should issue?

Technically speaking, the **website owner** decides which cookies a website issues to visitors - but it's not always obvious where the cookies are coming from. Cookies can created by:

* The **website code** itself (Javascript or server-side code)
* An **embedded script** (for example, Google Analytics)
* An **embedded iframe** (for example, a YouTube video)

I was very surprised by the number of cookies set by a YouTube embed! If you have a large website with user-generated content, it can be really difficult to know where all the cookies are coming from.

<figure class="centerFig w500">
![](./images/2024/cookies-drawing-7.png)
<figCaption>Surprise cookies!</figCaption>
</figure>

<Block class="warning">
This might present a problem if _you_ (and not the originator of the script) are legally obligated to document all cookies and provide a way for vistors to opt out of processing (for example, by declining tracking cookies).
</Block>

### Do websites really need cookies?

Some cookies are in fact **essential** for a website to function correctly. For example, many websites use session cookies to keep you logged.

Cookies used for marketing purposes such as tracking and analytics are considered **non-essential** - they might be essential to the _business_, but they are not essential to the visitor.

## How do cookies actually work?

When you request a web page - let's say, `mhwelander.net` - that web page sends you a **response**. That response contains all the pieces of text required to display the page: HTML, CSS, scripts, images, fonts - and **cookies**, although you (and many legislative bodies) could argue that cookies are an _optional_ part of a healthy diet.

[image]

You can see this happening in [Chrome Developer Tools](https://developer.chrome.com/docs/devtools). Click `Option + ‚åò + I` (Mac) or `F12` (Windows), then click on the **Network** tab and refresh your page. Notice that the response from `mhwelander.net` includes various requests to get fonts, stylesheets, and script files:

<figure class="centerFig">

![](./images/2024/network-request.png)

<figCaption>The network app</figCaption>
</figure>

### Seeing your cookies

Although cookies are not on that list on an obvious way (websites are not sending `23dDie8abc303.cookie` files), _one or more of the requests in that list_ is **delivering cookies to your browser**:

[Highlight things that could be setting cookies]

 You can see the cookies your browser has stored for a particular site in **Application** tab of the Chrome Developer Tools, under **Storage > Cookies > [yourwebsite]**:

<figure class="centerFig">

![](./images/2024/application-cookies.png)

<figCaption>Cookies sent by mhwelander.net</figCaption>
</figure>

For example, the contents of my `_ga` cookie is `GA1.1.748647506.1724449994` - tasty stuff. Your browser then **stores** those cookies until:

* They expire
* You delete them
* A script on the website (such as a cookie consent banner) deletes them - or at least the ones [that a script is capable of deleting](#)

### Cookies come from a script or from the HTTP response header

If websites are not sending you `*.cookie` files, then how do they make? You can receive a cookie from a website in two ways:

* In the HTTP response header (so fancy)
* Set by some Javascript

### Cookies are included in the request header

## First party and third party cookies

http response header - set third party cookie

### Why does the Google Analytics script say mhwelander.net and not google.com?

Ah, well.. 'first party cookie' means 'cookie where the domain is mhwelander.net'. 

Isn't that the same thing?

Yeah. Kind of. :) 

## HTTP-Only and regular cookies

## What is all the fuss about cookies?